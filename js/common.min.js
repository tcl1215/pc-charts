function remove(){$(".whole").removeClass("whole_3840"),$(".whole").removeClass("whole_1920"),$(".whole").removeClass("whole_1600"),$(".whole").removeClass("whole_1440"),$(".whole").removeClass("whole_1366"),$(".whole").removeClass("whole_1280")}function Loading(e){1==e?$("#loading").fadeIn(100):$("#loading").fadeOut(100)}function getQueryString(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null}function updateData(){initLeftBar(),initBtmLine(),showRanking(),showMap()}function showMap(){mapData.forEach(function(e){var a="green";if(e.grade>=80?a="green":e.grade<80&&e.grade>60?a="yellow":e.grade<=60&&(a="red"),"area"==e.type)$("#"+e.alias+"Map").find("img").attr("src","imgs/maps/area/"+e.alias+"-"+a+".png");else{var t=$("#"+e.alias).find("door-img");t.removeClass("red").removeClass("yellow").removeClass("green"),t.addClass(a)}})}function initLeftBar(){echarts.init(document.getElementById("leftBar")).setOption({tooltip:{trigger:"axis"},legend:{data:["押量","风险情况"],top:70,textStyle:{color:"#fff",fontSize:16}},grid:{left:38,top:106,bottom:23,right:40,containLabel:!0},xAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#00cfff",fontSize:18,formatter:function(e,a){return e/1e3+"k"}},type:"value",splitLine:{show:!1},max:5e3,splitNumber:5},yAxis:{type:"category",axisLine:{show:!1},axisLabel:{color:"#fff",fontSize:16},data:["黄浦区","徐汇区","静安区","长宁区","普陀区","虹口区","杨浦区","浦东新区","闵行区","奉贤区","松江区","金山区","青浦区","嘉定区","宝山区","崇明区"]},series:[{type:"bar",stack:"总量",name:"押量",barWidth:12,label:{normal:{show:!0,position:"top",color:"#fff"}},data:[320,302,301,334,1220,330,320,320,302,301,334,390,330,320,890,230]},{type:"bar",stack:"总量",name:"风险情况",barWidth:12,label:{normal:{show:!0,position:"top",color:"#fff"}},data:[3200,3020,5e3,3340,3900,3300,3200,3200,3002,3001,3034,3090,3300,3200,4090,2030]}],color:["#ffff00","#5e53dd"]})}function setTime(){var e=new Date,a=e.getFullYear()+"."+(e.getMonth()+1)+"."+e.getDate()+"."+e.getHours()+":"+(1==e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes());$(".current-time").text(a)}function initBtmLine(){echarts.init(document.getElementById("btmLine")).setOption({tooltip:{trigger:"axis"},legend:{data:["崇明区","宝山区","嘉定区","青浦区","金山区","松江区","奉贤区","闵行区","浦东新区","杨浦区","虹口区","普陀区","长宁区","静安区","徐汇区","黄浦区"],top:15,right:45,textStyle:{fontSize:16,color:"#fff"},itemGap:22},grid:{left:52,top:55,bottom:36,right:45,containLabel:!0},xAxis:{name:"9月",type:"category",nameLocation:"start",nameTextStyle:{fontSize:24,padding:[40,0,0,50],color:"#fff"},axisLine:{lineStyle:{color:"#1c486f"}},axisTick:{show:!1},axisLabel:{color:"#fff",fontSize:24},splitLine:{show:!0,lineStyle:{color:"#1c486f"}},boundaryGap:!0,data:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#fff",fontSize:18},splitLine:{show:!1}},series:[{name:"崇明区",type:"line",smooth:!0,data:[54,43,65,76,87,65,76,87,98,76,54,43,65,76,87,65,76,87,98,76]},{name:"宝山区",type:"line",smooth:!0,data:[65,76,87,98,76,54,43,65,76,87,98,76,54,43,65,76,87,65,76,87,98]},{name:"嘉定区",type:"line",smooth:!0,data:[76,87,98,76,54,43,65,76,87,76,54,43,65,76,87,65,76,87]},{name:"青浦区",type:"line",smooth:!0,data:[,76,54,43,65,76,87,65,76,87,98,76,54,43,65,76,87,76,54]},{name:"金山区",type:"line",smooth:!0,data:[87,65,76,87,98,76,54,43,65,76,87,76,54,87,65,76,87,98,76,54,43,65,76]},{name:"松江区",type:"line",smooth:!0,data:[98,76,54,43,65,76,87,76,54,87,65,76,98,76,54,43,65,76,87,76,54,87,65]},{name:"奉贤区",type:"line",smooth:!0,data:[43,65,76,87,76,54,87,65,76,98,43,65,76,87,76,54,87,65,76,98]},{name:"闵行区",type:"line",smooth:!0,data:[76,54,87,65,76,98,43,65,76,87,76,54,87,65,76,76,54,87,65,76,98,43,65,76]},{name:"浦东新区",type:"line",smooth:!0,data:[65,76,98,43,65,76,87,76,54,87,65,76,98,43,65,76,87,76,5,76,98,43,65,76,87]},{name:"杨浦区",type:"line",smooth:!0,data:[5,76,87,76,54,87,65,76,98,43,65,76,87,76,5,76,87,76,54,87,65,76,98,43,65,76]},{name:"虹口区",type:"line",smooth:!0,data:[54,87,65,76,98,43,65,76,87,76,5,76,87,76,54,87,54,87,65,76,98,43,65,76,87]},{name:"普陀区",type:"line",smooth:!0,data:[7,65,76,98,43,65,76,87,76,5,76,87,76,5,47,65,76,98,43,65,76,87,76,5,76,87,76]},{name:"长宁区",type:"line",smooth:!0,data:[13,65,76,87,76,5,76,87,76,5,47,65,76,98,43,65,76,87,7,3,65,76,87,76,5,76,98,65]},{name:"静安区",type:"line",smooth:!0,data:[87,76,5,76,87,76,5,47,65,76,3,65,76,87,76,5,76,87,76,5,47,65,76,98,43,65,76,87,7]},{name:"徐汇区",type:"line",smooth:!0,data:[5,47,65,76,3,65,76,87,76,5,76,87,76,5,47,65,76,98,43,65,5,47,65,76,65,76,87,65,43,65]},{name:"黄浦区",type:"line",smooth:!0,data:[76,98,43,65,5,47,76,98,43,65,5,47,76,98,43,65,5,47,76,98,43,65,5,47,76,98,43,65,5,47]}],color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ffff00","#5e53dd","#fff","#ff0000","#00ffff"]})}function showRanking(){var e="";[{name:"崇明区",grade:98},{name:"宝山区",grade:97},{name:"嘉定区",grade:95},{name:"青浦区",grade:80},{name:"金山区",grade:60},{name:"松江区",grade:58},{name:"奉贤区",grade:56},{name:"闵行区",grade:52},{name:"浦东新区",grade:50},{name:"杨浦区",grade:48},{name:"虹口区",grade:45},{name:"普陀区",grade:42},{name:"长宁区",grade:40},{name:"静安区",grade:36},{name:"徐汇区",grade:32},{name:"黄浦区",grade:28}].forEach(function(a,t){e+='<li class="level'+(t+1)+'"><div class="r-index">'+(t+1)+'</div><div class="r-name">'+a.name+'</div><div class="grade-box"><div class="r-progress"><i style="width: '+141*a.grade/100+'px"></i></div><div class="r-grade">'+a.grade+"</div></div></li>"}),$(".right-box ul").html(e)}function showTip(){$(".tip").fadeOut(0),$(".tip").fadeIn(200),showRadar()}function showRadar(){echarts.init(document.getElementById("indexRadar")).setOption({tooltip:{trigger:"axis"},radar:[{name:{color:"#fff"},indicator:[{text:"在押人员",max:100,min:50},{text:"民警管理",max:100,min:50},{text:"基础设施",max:100,min:50},{text:"安防设施",max:100,min:50},{text:"客观因素",max:100,min:50}],axisLine:{show:!1},splitLine:{lineStyle:{color:"#fff"}},splitArea:{areaStyle:{color:"rgba(0,0,0,0)"}},splitNumber:6}],series:[{type:"radar",tooltip:{trigger:"item"},label:{normal:{show:!0,color:"#fff",textStyle:{fontSize:18}}},itemStyle:{normal:{color:"#ffff00"}},lineStyle:{normal:{color:"#ffff00"}},areaStyle:{normal:{color:"#ffff00",opacity:.2}},data:[{value:[55,65,76,76,92]}]}]})}function updateAverageChart(){$(".average-box").fadeIn(),$(".important-box").fadeOut(),showAverageLine(),showAverageBar()}function updataImportantChart(){$(".average-box").fadeOut(),$(".important-box").fadeIn(),showImportantBar()}function showAverageLine(){echarts.init(document.getElementById("lineChart")).setOption({title:{text:"全市指数变化",left:"center",textStyle:{fontSize:44}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",top:100,containLabel:!0,backgroundColor:"#d9d9d9"},xAxis:[{type:"category",splitLine:{show:!0,lineStyle:{color:"#a8a8a8"}},boundaryGap:!1,axisLabel:{textStyle:{fontSize:18}},data:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]}],yAxis:[{type:"value",min:40,max:100,splitLine:{show:!0,lineStyle:{color:"#a8a8a8"}},splitArea:{show:!0,areaStyle:{color:["#d9d9d9"]}},splitNumber:6,axisLabel:{textStyle:{fontSize:18}}}],series:[{type:"line",lineStyle:{normal:{width:4}},data:[90,91,92,93,94,95,96,97,98,99,90,91,89,87,67,87,84,92,93,90,91,92,93,94,95,96,97,98,96,85,87]}],color:["#0303fe"]})}function showAverageBar(){echarts.init(document.getElementById("barChart")).setOption({title:{text:"各所指数情况",left:"center",textStyle:{fontSize:44}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:50,top:100,containLabel:!0},xAxis:[{type:"category",data:["上海市一看","上海市二看","上海市三看","上海市四看","静安区","黄浦区","徐汇区","长宁区","普陀区","虹口区","杨浦区","浦东新区","闵行区","奉贤区","松江区","金山区","青浦区","嘉定区","宝山区","崇明区"],axisLabel:{rotate:45,interval:0,textStyle:{fontSize:18,fontWeight:"bold"}}}],yAxis:[{type:"value",min:0,max:120,splitLine:{show:!0,lineStyle:{color:"#a8a8a8"}},axisLabel:{textStyle:{fontSize:18,fontWeight:"bold",color:function(e,a){return 80==e?"#ff6700":"#000"}}},splitNumber:6}],series:[{type:"bar",barWidth:20,barGap:37,data:[90,91,92,93,94,95,97,98,99,90,91,89,87,67,87,84,92,93,90,91],markLine:{lineStyle:{normal:{type:"solid",color:"#ff6700",width:4}},symbolSize:0,label:{normal:{show:!1}},data:[{yAxis:80}]}}],color:["#0303fe"]})}function showImportantBar(){echarts.init(document.getElementById("importantBarChart")).setOption({title:{text:"看守所数量",left:"center",textStyle:{fontSize:42}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:50,top:70,containLabel:!0},xAxis:[{type:"category",data:["未开展","招投标","试运行","已完成"],axisTick:{show:!1}}],yAxis:[{type:"value",axisLabel:{textStyle:{fontSize:23}},axisLine:{show:!1},axisTick:{show:!1}}],series:[{type:"bar",barWidth:75,barGap:150,data:[5,6,1,12]}],color:["#0303fe"]})}$(document).ready(function(){remove(),screen.width>=3840?$(".whole").addClass("whole_3840"):screen.width>=1920?$(".whole").addClass("whole_1920"):screen.width>=1600?$(".whole").addClass("whole_1600"):screen.width>=1440?$(".whole").addClass("whole_1440"):screen.width>=1366?$(".whole").addClass("whole_1366"):$(".whole").addClass("whole_1280")});var tabIndex=getQueryString("tabIndex")||0,tabName="",modeIndex=0,modeName="",time=null;$(document).ready(function(){setInterval(setTime,1e3),$(".MapClick").dblclick(function(){clearTimeout(time);var e=$(this).attr("id");"baoshan2"!=e&&"baoshan3"!=e||(e="baoshan"),window.location.href="chart.html?name="+e}),$(".MapClick").click(function(){clearTimeout(time);var e,a=$(this).attr("id");"baoshan2"==a||"baoshan3"==a?(a="baoshan",e=$("#"+a+"Map")):e="door1"==a||"door2"==a||"door3"==a||"door4"==a?$(this):$("#"+a+"Map"),e.animate({opacity:"0.2"},100,function(){e.animate({opacity:"1"},200)}),time=setTimeout(function(){showTip()},200)}),$(".nav-top-ul li").click(function(){$(this).hasClass("selected")||($(this).siblings().removeClass("selected"),$(this).addClass("selected"),tabName=$(this).attr("id"),tabIndex=$(this).index(),"ImportantTips"==tabName?window.location.href="important-tips.html":"RankingList"==tabName?alert("排行榜页面"):$(".filter-box").find("li")[modeIndex].click())}),$(".filter-box li").click(function(){$(this).hasClass("selected")||($(this).siblings().removeClass("selected"),$(this).addClass("selected"),modeName=$(this).attr("id"),modeIndex=$(this).index(),updateData())}),$(".nav-top-ul").find("li")[tabIndex].click(),$(".tip-close").click(function(){$(".tip").fadeOut(100)})});var mapData=[{name:"崇明区",alias:"congming",grade:parseInt(100*Math.random()),type:"area"},{name:"宝山区",alias:"baoshan",grade:parseInt(100*Math.random()),type:"area"},{name:"嘉定区",alias:"jiading",grade:parseInt(100*Math.random()),type:"area"},{name:"青浦区",alias:"qingpu",grade:parseInt(100*Math.random()),type:"area"},{name:"金山区",alias:"jinshan",grade:parseInt(100*Math.random()),type:"area"},{name:"松江区",alias:"songjiang",grade:parseInt(100*Math.random()),type:"area"},{name:"奉贤区",alias:"fengxian",grade:parseInt(100*Math.random()),type:"area"},{name:"闵行区",alias:"minhang",grade:parseInt(100*Math.random()),type:"area"},{name:"浦东新区",alias:"pudong",grade:parseInt(100*Math.random()),type:"area"},{name:"杨浦区",alias:"yangpu",grade:parseInt(100*Math.random()),type:"area"},{name:"虹口区",alias:"hongkou",grade:parseInt(100*Math.random()),type:"area"},{name:"普陀区",alias:"putuo",grade:parseInt(100*Math.random()),type:"area"},{name:"长宁区",alias:"changning",grade:parseInt(100*Math.random()),type:"area"},{name:"静安区",alias:"jingan",grade:parseInt(100*Math.random()),type:"area"},{name:"徐汇区",alias:"xuhui",grade:parseInt(100*Math.random()),type:"area"},{name:"黄浦区",alias:"huangpu",grade:parseInt(100*Math.random()),type:"area"},{name:"上海市区",alias:"shiqu",grade:parseInt(100*Math.random()),type:"area"},{name:"第一看守所",alias:"door1",grade:parseInt(100*Math.random()),type:"main"},{name:"第二看守所",alias:"door2",grade:parseInt(100*Math.random()),type:"main"},{name:"第三看守所",alias:"door3",grade:parseInt(100*Math.random()),type:"main"},{name:"第四看守所",alias:"door4",grade:parseInt(100*Math.random()),type:"main"}],modeIndex=0,type="average",index=0;$(document).ready(function(){$(".menu-box li").click(function(){var e=$(this).attr("id"),a=$(this).index();"ImportantTips"!=e&&("RankingList"==e?alert("排行榜页面"):window.location.href="index.html?tabIndex="+a)}),$(".filter-box li").click(function(){if(!$(this).hasClass("selected")){$(this).siblings().removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("id");"checkMode"==e?$("#average").find("li")[0].click():"warningMode"==e&&$("#average").find("li")[0].click()}}),$(".item-box li").click(function(){$(".list-item").removeClass("selected"),$(this).addClass("selected"),type=$(this).parents("ul").attr("id"),index=$(this).index(),"average"==type?updateAverageChart():"important"==type&&updataImportantChart()}),$("#"+type).find("li")[index].click()});